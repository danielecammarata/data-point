/* eslint-disable no-console */
const assert = require("assert");
const dataPoint = require("../").create();

dataPoint.addEntities({
  "model:getArray": {
    // points to a NON Array value
    value: "$a.b",
    outputType: "array",
    error: input => {
      // prints out the error
      // message generated by
      // isArray type check
      console.log(input.message);

      console.log("Value is invalid, resolving to empty array");

      // passing a value will stop
      // the propagation of the error
      return [];
    }
  }
});

const input = {
  a: {
    b: "foo"
  }
};

dataPoint.resolve("model:getArray", input).then(output => {
  assert.deepStrictEqual(output, []);
});
